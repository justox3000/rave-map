
<%= render "shared/navbar" %>
<%= render "shared/search_form" %>
<div class="card-show-container">
  <h1><%= @party.title %></h1>
  <%= cl_image_tag @party.photo.key, width: 800, crop: :fit, class: "rounded" %>
    <div class="card-show-details d-flex justify-content-between">
      <div class="card-show-infos">
        <p><i class="fa-solid fa-music"></i> <%= @party.music_genre %></p>
        <p><i class="fa-solid fa-calendar-days"> </i> <%= @party.date.strftime("%a %e %B %Y") %></p>
        <p><i class="fa-solid fa-clock-eleven"></i> <%= @party.start_time.strftime("%l:%M %p") %></p>
        <p><i class="fa-solid fa-location-dot"> </i> <%= @party.location %></p>
        <p><i class="fa-solid fa-earth-americas"> </i> <%= @party.address  %></p>
        <br>
        <p>Description</p>
      </div>
      <div class="btn-bookmark">
        <% if current_user.favorited?(@party) %>
          <%= link_to favorite_party_path, data: {
            controller: "bookmarked",
            action: "click->bookmarked#fireSweetAlert",
            turbo_method: :patch,
            bookmarked_favoriting_value: false
          }, class: "btn btn-primary rounded-circle my-3" do %>
            <i class="fa-solid fa-bookmark" data-bookmarked-target= "bookmark"></i>
          <% end %>
        <% else %>
          <%= link_to favorite_party_path, class: "btn btn-primary rounded-circle my-3", data: {
            controller: "bookmarked",
            action: "click->bookmarked#fireSweetAlert",
            turbo_method: :patch,
            bookmarked_favoriting_value: true
          } do %>
            <i class="fa-regular fa-bookmark" data-bookmarked-target= "bookmark"></i>
          <% end %>
        <% end %>
      </div>
    </div>
    <p class="card-description"><%= @party.description[0..249] %></p>
    <% if @party.description.length >= 250 %>
      <a class="button" data-bs-toggle="collapse" href="#collapseExample" role="button">
        Read more
      </a>
      <div class="collapse" id="collapseExample">
        <div class="card card-body card-collapse">
          <p class="card-description"><%= @party.description[250..] %></p>
    <% end %>
        </div>
  </div>

  <div style="width: 100%; height: 400px;"
    data-controller="map"
    data-map-markers-value="<%= @markers.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>
</div>
